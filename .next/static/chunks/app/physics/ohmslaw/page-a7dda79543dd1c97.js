(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[671],{4862:function(e,t,s){Promise.resolve().then(s.bind(s,6239)),Promise.resolve().then(s.bind(s,1523)),Promise.resolve().then(s.bind(s,49))},6239:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return a}});var n=s(7437),l=s(2265);function a(e){let{initialV:t=5,initialR:s=5,initialRint:a=.5}=e,[r,i]=(0,l.useState)(Number(t)),[c,d]=(0,l.useState)(Number(s)),[o,u]=(0,l.useState)(Number(a)),[m,x]=(0,l.useState)(()=>r/(c+o)),[h,p]=(0,l.useState)("voltage"),[b,f]=(0,l.useState)(""),[g,j]=(0,l.useState)(!0),[N,v]=(0,l.useState)(!0),[y,w]=(0,l.useState)(.005),[S,R]=(0,l.useState)(.01),[k,V]=(0,l.useState)([]),C=(0,l.useRef)([]),[I,_]=(0,l.useState)([]),[M,O]=(0,l.useState)("voltage"),[P,L]=(0,l.useState)(1),[E,F]=(0,l.useState)(12),[A,T]=(0,l.useState)(8),[U,D]=(0,l.useState)(!1),J="openlabs_ohms_runs_v1",B=(0,l.useRef)(null);function W(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"V",s=Math.abs(e)*y,n=e+(2*Math.random()-1)*s;return"V"===t?Number(n.toFixed(2)):Number(n.toFixed(3))}async function z(){D(!0);let e=[],t=Math.max(2,Math.floor(A));if("voltage"===M)for(let s=0;s<t;s++){let n=P+s/(t-1)*(E-P),l=n/(c+o),a=W(n,"V"),r=W(l,"I");e.push({V:a,I:r}),_(e=>[...e,{V:a,I:r}]),await new Promise(e=>setTimeout(e,120))}else{let s=Math.max(.01,P),n=Math.max(s+.01,E);for(let l=0;l<t;l++){let a=s+l/(t-1)*(n-s),i=r/(a+o),c=W(i*a,"V"),d=W(i,"I");e.push({V:c,I:d,R:a}),_(e=>[...e,{V:c,I:d,R:a}]),await new Promise(e=>setTimeout(e,120))}}_(e),D(!1)}function q(){let e=N?W(r-m*o,"V"):null,t=g?W(m,"I"):null;V(s=>[...s,{V:e,I:t,note:""}])}function G(e){let t=Number(e.target.value);Number.isNaN(t)||(i(t),p("voltage"))}function H(e){let t=Number(e.target.value);Number.isNaN(t)||(d(t),p("resistance"))}function K(e){let t=Number(e.target.value);Number.isNaN(t)||u(t)}return(0,l.useEffect)(()=>{if(f(""),c+o<=0){f("Total resistance must be > 0"),x(0);return}"voltage"===h?x(r/(c+o)):"current"===h?i(m*(c+o)):"resistance"===h&&x(r/(c+o))},[r,m,c,o,h]),(0,l.useEffect)(()=>{let e=B.current;if(!e)return;let t=e.getContext("2d"),s=e.width,n=e.height;t.clearRect(0,0,s,n);let l=I.length?I:C.current.length?C.current:null,a=1.2*Math.max(r,I.reduce((e,t)=>Math.max(e,t.V||0),r),10),i=1.2*Math.max(m,I.reduce((e,t)=>Math.max(e,t.I||0),m),1);t.strokeStyle="#e6eef8",t.lineWidth=1,t.beginPath(),t.moveTo(36,36),t.lineTo(36,n-36),t.lineTo(s-36,n-36),t.stroke(),t.fillStyle="#64748b",t.font="12px sans-serif",t.fillText("Voltage → (V)",s-36-70,n-36+18),t.fillText("↑ Current (A)",6,42),t.strokeStyle="#2563eb",t.lineWidth=2,t.beginPath();for(let e=0;e<=80;e++){let l=e/80*a,r=l/(c+o),d=36+l/a*(s-72),u=n-36-r/i*(n-72);0===e?t.moveTo(d,u):t.lineTo(d,u)}if(t.stroke(),l&&l.length){t.fillStyle="#0f172a";for(let e=0;e<l.length;e++){let r=l[e],c=r.V,d=r.I,o=36+c/a*(s-72),u=n-36-d/i*(n-72);t.fillStyle="#10b981",t.beginPath(),t.arc(o,u,4,0,2*Math.PI),t.fill()}}let d=36+r/a*(s-72),u=n-36-m/i*(n-72);if(t.fillStyle="#dc2626",t.beginPath(),t.arc(d,u,5,0,2*Math.PI),t.fill(),t.fillStyle="#0f172a",t.fillText("(".concat(r.toFixed(2)," V, ").concat(m.toFixed(3)," A)"),d+8,u-8),I.length>=3){let e=function(e,t){let s=e.length;if(0===s)return null;let n=e.reduce((e,t)=>e+t,0)/s,l=t.reduce((e,t)=>e+t,0)/s,a=0,r=0;for(let i=0;i<s;i++)a+=(e[i]-n)*(t[i]-l),r+=(e[i]-n)*(e[i]-n);let i=0===r?0:a/r;return{m:i,b:l-i*n}}(I.map(e=>e.V),I.map(e=>e.I));if(e){let s=e.m,n=e.b,l=0!==s?1/s-0:1/0;t.fillStyle="#374151",t.fillText("Fit: I = ".concat(s.toFixed(4)," V + ").concat(n.toFixed(4)),44,48),t.fillText("Estimated R_total ≈ ".concat(l===1/0?"∞":l.toFixed(3)," Ω"),44,64)}}},[r,m,c,o,I]),(0,l.useEffect)(()=>{c+o<=0?(f("Total resistance must be > 0"),x(0)):x(r/(c+o))},[]),(0,n.jsxs)("div",{className:"max-w-6xl mx-auto p-4 space-y-4",children:[(0,n.jsxs)("header",{className:"flex items-center justify-between",children:[(0,n.jsx)("h2",{className:"text-2xl font-semibold",children:"Ohm’s Law — Virtual Lab"}),(0,n.jsx)("div",{className:"text-sm text-gray-600",children:"Explore V = I \xd7 R — measure with virtual instruments, sweep, and export reports."})]}),(0,n.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"md:col-span-1 bg-white p-4 rounded shadow space-y-3",children:[(0,n.jsx)("h3",{className:"font-semibold",children:"Circuit Controls"}),(0,n.jsx)("label",{className:"block text-sm",children:"Source EMF (V)"}),(0,n.jsx)("input",{type:"range",min:0,max:24,step:.1,value:r,onChange:G}),(0,n.jsx)("input",{type:"number",value:r,onChange:G,className:"mt-1 w-full border rounded px-2 py-1"}),(0,n.jsx)("label",{className:"block text-sm mt-2",children:"Load resistance R (Ω)"}),(0,n.jsx)("input",{type:"range",min:.1,max:1e3,step:.1,value:c,onChange:H}),(0,n.jsx)("input",{type:"number",value:c,onChange:H,className:"mt-1 w-full border rounded px-2 py-1"}),(0,n.jsx)("label",{className:"block text-sm mt-2",children:"Internal resistance r_int (Ω)"}),(0,n.jsx)("input",{type:"range",min:0,max:10,step:.01,value:o,onChange:K}),(0,n.jsx)("input",{type:"number",value:o,onChange:K,className:"mt-1 w-full border rounded px-2 py-1"}),(0,n.jsx)("label",{className:"block text-sm mt-2",children:"Manual current override (A)"}),(0,n.jsx)("input",{type:"number",value:m,onChange:function(e){let t=Number(e.target.value);Number.isNaN(t)||(x(t),p("current"))},className:"mt-1 w-full border rounded px-2 py-1"}),(0,n.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,n.jsx)("button",{onClick:()=>{i(t),d(s),u(a),p("voltage"),f("")},className:"flex-1 py-2 rounded bg-gray-200",children:"Reset Params"}),(0,n.jsx)("button",{onClick:q,className:"flex-1 py-2 rounded bg-green-600 text-white",children:"Record Meter Readings"})]}),(0,n.jsxs)("div",{className:"text-sm mt-2 text-gray-600",children:[(0,n.jsxs)("div",{children:["Last edited: ",(0,n.jsx)("strong",{children:h})]}),b&&(0,n.jsx)("div",{className:"text-red-600 mt-1",children:b}),(0,n.jsxs)("div",{className:"mt-2",children:["Computed current: ",(0,n.jsxs)("strong",{children:[m.toFixed(4)," A"]})]}),(0,n.jsxs)("div",{children:["Voltage across load: ",(0,n.jsxs)("strong",{children:[(m*c).toFixed(3)," V"]})]}),(0,n.jsx)("div",{className:"mt-1 text-xs",children:"Note: total R = R + r_int"})]})]}),(0,n.jsxs)("div",{className:"md:col-span-2 bg-white p-4 rounded shadow space-y-4",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[(0,n.jsxs)("svg",{width:"420",height:"120",viewBox:"0 0 420 120",className:"rounded",children:[(0,n.jsxs)("g",{transform:"translate(10,20)",children:[(0,n.jsx)("rect",{x:"0",y:"10",width:"28",height:"80",fill:"#fde047",stroke:"#b45309",rx:"6"}),(0,n.jsxs)("text",{x:"14",y:"55",fontSize:"11",textAnchor:"middle",fill:"#1f2937",children:["EMF ",r.toFixed(2),"V"]})]}),(0,n.jsx)("line",{x1:"48",y1:"60",x2:"180",y2:"60",stroke:"#374151",strokeWidth:"4"}),(0,n.jsxs)("g",{transform:"translate(180,36)",children:[(0,n.jsx)("rect",{x:"0",y:"0",width:"120",height:"48",rx:"6",fill:"#ef4444"}),(0,n.jsxs)("text",{x:"60",y:"28",fontSize:"12",textAnchor:"middle",fill:"#fff",children:["R: ",c.toFixed(2)," Ω"]})]}),(0,n.jsx)("line",{x1:"300",y1:"60",x2:"380",y2:"60",stroke:"#374151",strokeWidth:"4"}),(0,n.jsxs)("text",{x:"320",y:"100",fontSize:"11",fill:"#0f172a",children:["r_int ",o.toFixed(2),"Ω"]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium",children:"Instruments"}),(0,n.jsxs)("div",{className:"mt-2 flex gap-2",children:[(0,n.jsxs)("label",{className:"inline-flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:g,onChange:e=>j(e.target.checked),className:"mr-2"}),"Ammeter"]}),(0,n.jsxs)("label",{className:"inline-flex items-center",children:[(0,n.jsx)("input",{type:"checkbox",checked:N,onChange:e=>v(e.target.checked),className:"mr-2"}),"Voltmeter"]})]}),(0,n.jsxs)("div",{className:"mt-3",children:[g&&(0,n.jsxs)("div",{className:"p-2 bg-gray-50 rounded border w-40",children:[(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Ammeter (A)"}),(0,n.jsxs)("div",{className:"text-xl font-mono",children:[W(m,"I")," A \xb1",S]})]}),N&&(0,n.jsxs)("div",{className:"p-2 bg-gray-50 rounded border w-40 mt-2",children:[(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Voltmeter across load (V)"}),(0,n.jsxs)("div",{className:"text-xl font-mono",children:[W(m*c,"V")," V \xb1",S]})]})]})]})]}),(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsx)("div",{className:"mb-2",children:"Instrument noise (frac)"}),(0,n.jsx)("input",{type:"range",min:"0",max:"0.05",step:"0.001",value:y,onChange:e=>w(Number(e.target.value))}),(0,n.jsx)("input",{type:"number",step:"0.001",value:y,onChange:e=>w(Number(e.target.value)),className:"mt-1 w-28 border rounded px-2 py-1"}),(0,n.jsxs)("div",{className:"mt-2 text-xs",children:["Measurement uncertainty \xb1",S]}),(0,n.jsx)("input",{type:"number",step:"0.001",value:S,onChange:e=>R(Number(e.target.value)),className:"mt-1 w-28 border rounded px-2 py-1"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,n.jsx)("div",{className:"font-medium",children:"V–I Plot"}),(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"Red dot = operating point"})]}),(0,n.jsx)("canvas",{ref:B,width:760,height:260,className:"w-full border rounded"})]})]})]}),(0,n.jsxs)("div",{className:"bg-white p-4 rounded shadow space-y-3",children:[(0,n.jsx)("h3",{className:"font-semibold",children:"Sweep & Measurement"}),(0,n.jsxs)("div",{className:"grid md:grid-cols-6 gap-2 items-end",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs",children:"Sweep mode"}),(0,n.jsxs)("select",{value:M,onChange:e=>O(e.target.value),className:"w-full border rounded px-2 py-1",children:[(0,n.jsx)("option",{value:"voltage",children:"V (vary source)"}),(0,n.jsx)("option",{value:"resistance",children:"R (vary load)"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs",children:"Start"}),(0,n.jsx)("input",{type:"number",step:"0.01",value:P,onChange:e=>L(Number(e.target.value)),className:"w-full border rounded px-2 py-1"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs",children:"End"}),(0,n.jsx)("input",{type:"number",step:"0.01",value:E,onChange:e=>F(Number(e.target.value)),className:"w-full border rounded px-2 py-1"})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("label",{className:"block text-xs",children:"Steps"}),(0,n.jsx)("input",{type:"number",min:"2",value:A,onChange:e=>T(Number(e.target.value)),className:"w-full border rounded px-2 py-1"})]}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{onClick:()=>{_([]),z()},disabled:U,className:"w-full py-2 rounded bg-indigo-600 text-white",children:U?"Running...":"Run Sweep"})}),(0,n.jsx)("div",{children:(0,n.jsx)("button",{onClick:function(){_([]),C.current=[]},className:"w-full py-2 rounded bg-gray-200",children:"Clear"})})]}),(0,n.jsxs)("div",{className:"mt-3 grid md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium",children:"Sweep Results"}),(0,n.jsx)("div",{className:"mt-2 max-h-40 overflow-auto text-sm",children:0===I.length?(0,n.jsx)("div",{className:"text-xs text-gray-500",children:"No results"}):(0,n.jsxs)("table",{className:"w-full border-collapse",children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{className:"border-b border-gray-200 p-2",children:"V (V)"}),(0,n.jsx)("th",{className:"border-b border-gray-200 p-2",children:"I (A)"}),(0,n.jsx)("th",{className:"border-b border-gray-200 p-2",children:"R? (Ω)"})]})}),(0,n.jsx)("tbody",{children:I.map((e,t)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{className:"p-2",children:e.V||"—"}),(0,n.jsx)("td",{className:"p-2",children:e.I||"—"}),(0,n.jsx)("td",{className:"p-2",children:e.R?e.R.toFixed(3):"-"})]},t))})]})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm font-medium",children:"Manual Entries"}),(0,n.jsxs)("div",{className:"mt-2 text-sm",children:[(0,n.jsx)("button",{onClick:q,className:"px-3 py-1 rounded bg-emerald-500 text-white mb-2",children:"Add Entry (read meters)"}),(0,n.jsx)("button",{onClick:()=>V([]),className:"px-3 py-1 rounded bg-gray-200 ml-2",children:"Clear"}),(0,n.jsx)("div",{className:"mt-2",children:(0,n.jsx)("ul",{className:"max-h-40 overflow-auto",children:k.map((e,t)=>(0,n.jsxs)("li",{className:"flex justify-between text-sm py-1 border-b",children:["V=".concat(e.V," V, I=").concat(e.I," A"),(0,n.jsx)("span",{className:"text-xs text-gray-500",children:e.note})]},t))})})]})]})]})]}),(0,n.jsxs)("div",{className:"bg-white p-4 rounded shadow flex gap-2",children:[(0,n.jsx)("button",{onClick:()=>(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"run_".concat(Date.now()),t=JSON.parse(localStorage.getItem(J)||"[]"),s={name:e,date:new Date().toISOString(),params:{voltage:r,resistance:c,rInternal:o,instrumentNoise:y,uncertainty:S},measured:{current:m,sweepResults:I}};t.push(s),localStorage.setItem(J,JSON.stringify(t)),alert("Saved run: "+e)})(),className:"px-3 py-2 bg-orange-500 text-white rounded",children:"Save Run"}),(0,n.jsx)("button",{onClick:()=>{let e=JSON.parse(localStorage.getItem(J)||"[]");0===e.length?alert("No saved runs"):alert(e.map(e=>e.name+" - "+e.date).join("\n"))},className:"px-3 py-2 bg-gray-200 rounded",children:"List Saved"}),(0,n.jsx)("button",{onClick:()=>void(localStorage.removeItem(J),alert("Cleared saved runs")),className:"px-3 py-2 bg-red-500 text-white rounded",children:"Clear Saved"}),(0,n.jsx)("div",{className:"flex-1"}),(0,n.jsx)("button",{onClick:function(){let e=[["V_source_V","I_A","R_load_Ohm","R_internal"]];e.push([r.toString(),m.toString(),c.toString(),o.toString()]);let t=new Blob([e.map(e=>e.join(",")).join("\n")],{type:"text/csv"}),s=URL.createObjectURL(t),n=document.createElement("a");n.href=s,n.download="ohmslab_".concat(Date.now(),".csv"),n.click(),URL.revokeObjectURL(s)},className:"px-3 py-2 bg-green-600 text-white rounded",children:"Export CSV"}),(0,n.jsx)("button",{onClick:function(){let e=new Blob([JSON.stringify({params:{voltage:r,resistance:c,rInternal:o},current:m,sweepResults:I,manualEntries:k,date:new Date().toISOString()},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),s=document.createElement("a");s.href=t,s.download="ohmslab_".concat(Date.now(),".json"),s.click(),URL.revokeObjectURL(t)},className:"px-3 py-2 bg-yellow-400 rounded",children:"Export JSON"}),(0,n.jsx)("button",{onClick:function(){let e="\n      <html><head><title>OpenLabs - Ohm's Law Report</title>\n      <style>body{font-family:Arial;padding:20px}table{border-collapse:collapse}td,th{border:1px solid #ddd;padding:6px}</style>\n      </head><body>\n      <h1>OpenLabs - Ohm's Law Report</h1>\n      <p><strong>Date:</strong> ".concat(new Date().toLocaleString(),"</p>\n      <h2>Parameters</h2>\n      <ul>\n        <li>V_source: ").concat(r," V</li>\n        <li>Load R: ").concat(c," Ω</li>\n        <li>Internal r: ").concat(o," Ω</li>\n        <li>Instrument noise (frac): ").concat(y,"</li>\n        <li>Uncertainty: \xb1").concat(S,"</li>\n      </ul>\n      <h2>Measured</h2>\n      <p>Current: ").concat(m.toFixed(4)," A</p>\n      <h3>Sweep Results</h3>\n      <pre>").concat(I.map(e=>"V=".concat(e.V," V, I=").concat(e.I," A").concat(e.R?", R=".concat(e.R," Ω"):"")).join("\n"),'</pre>\n      <hr/><p>Generated by OpenLabs</p>\n      <button onclick="window.print()">Print / Save as PDF</button>\n      </body></html>'),t=window.open("","_blank");if(!t){alert("Popup blocked");return}t.document.write(e),t.document.close()},className:"px-3 py-2 bg-indigo-600 text-white rounded",children:"Printable Report"})]}),(0,n.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,n.jsx)("h3",{className:"font-semibold",children:"Lab Instructions"}),(0,n.jsxs)("ol",{className:"list-decimal list-inside text-sm mt-2",children:[(0,n.jsx)("li",{children:"Set EMF and R. Inspect ammeter and voltmeter readings."}),(0,n.jsxs)("li",{children:["Record manual entries (press ",(0,n.jsx)("em",{children:"Record Meter Readings"}),") and note instrument readings."]}),(0,n.jsx)("li",{children:"Run a sweep (vary V or R) to collect V-I data and fit to estimate total resistance."}),(0,n.jsx)("li",{children:"Export CSV/JSON or open printable report for submission."})]})]})]})}},1523:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let n=s(8993);function l(e){let{reason:t,children:s}=e;if("undefined"==typeof window)throw new n.BailoutToCSRError(t);return s}},49:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return a}});let n=s(7437),l=s(544);function a(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let s=(0,l.getExpectedRequestStore)("next/dynamic css"),a=[];if(s.reactLoadableManifest&&t){let e=s.reactLoadableManifest;for(let s of t){if(!e[s])continue;let t=e[s].files.filter(e=>e.endsWith(".css"));a.push(...t)}}return 0===a.length?null:(0,n.jsx)(n.Fragment,{children:a.map(e=>(0,n.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:s.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=4862)}),_N_E=e.O()}]);