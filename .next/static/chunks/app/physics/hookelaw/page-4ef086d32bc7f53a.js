(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[331],{5650:function(e,t,n){Promise.resolve().then(n.bind(n,3889)),Promise.resolve().then(n.bind(n,1523)),Promise.resolve().then(n.bind(n,49))},3889:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var s=n(7437),l=n(2265);function r(e){let{initialM:t=1,initialK:n=10,initialC:r=.05,initialX:a=.5}=e,i=(0,l.useRef)(null),c=(0,l.useRef)(null),o=(0,l.useRef)([]),d=(0,l.useRef)([]),u=(0,l.useRef)(0),m=(0,l.useRef)(a),x=(0,l.useRef)(0),[h,p]=(0,l.useState)(t),[f,g]=(0,l.useState)(n),[b,j]=(0,l.useState)(r),[v,N]=(0,l.useState)(a),[y,w]=(0,l.useState)(!0),[S,k]=(0,l.useState)(2*Math.PI*Math.sqrt(t/n)),[M,C]=(0,l.useState)(null),[R,T]=(0,l.useState)(0),[P,F]=(0,l.useState)(!1),L=(0,l.useRef)({start:null,elapsed:0}),[_,E]=(0,l.useState)("0.000"),[O,I]=(0,l.useState)([]),[U,D]=(0,l.useState)([]),[q,J]=(0,l.useState)("mass"),[W,A]=(0,l.useState)(.2),[B,H]=(0,l.useState)(3),[V,z]=(0,l.useState)(8),[G,K]=(0,l.useState)([]),[Q,X]=(0,l.useState)(!1),[Y,Z]=(0,l.useState)(.02),[,$]=(0,l.useState)(""),[ee,et]=(0,l.useState)(.005),en="openlabs_hooke_runs_v1";async function es(){X(!0);let e=[],t=Math.max(2,Math.floor(V));for(let n=0;n<t;n++){let s,l;let r=W+n/(t-1)*(B-W);"mass"===q?(s=r,l=await el(s,f,b,v,6),e.push({m:s,T:l}),K(e=>[...e,{m:s,T:l}])):(s=r,l=await el(h,s,b,v,6),e.push({k:s,T:l}),K(e=>[...e,{k:s,T:l}])),await new Promise(e=>setTimeout(e,80))}K(e),X(!1)}function el(e,t,n,s){let l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6;return new Promise(r=>{let a=s,i=0,c=0,o=[],d=a;for(;c<60&&o.length<l;){let s=-(t/e)*a-n/e*i;i+=.005*s,c+=.005,d*(a+=.005*i)<0&&o.push(c),d=a}let u=null;if(o.length>=4){let e=[];for(let t=2;t<o.length;t++)e.push(o[t]-o[t-2]);u=e.reduce((e,t)=>e+t,0)/e.length}else u=2*Math.PI*Math.sqrt(e/t);r(u)})}return(0,l.useEffect)(()=>{h>0&&f>0?k(2*Math.PI*Math.sqrt(h/f)):k(0)},[h,f]),(0,l.useEffect)(()=>{let e=null;return P?(L.current.start||(L.current.start=performance.now()-1e3*L.current.elapsed),e=setInterval(()=>{E(((performance.now()-L.current.start)/1e3).toFixed(3))},40)):(L.current.start&&(L.current.elapsed=(performance.now()-L.current.start)/1e3),E(L.current.elapsed.toFixed(3))),()=>clearInterval(e)},[P]),(0,l.useEffect)(()=>{let e=i.current;if(!e)return;let t=e.getContext("2d");function n(){let n=e.parentElement,s=n?Math.min(900,Math.max(320,n.clientWidth-8)):800,l=Math.round(Math.max(240,Math.min(600,.6*s))),r=window.devicePixelRatio||1;e.width=Math.round(s*r),e.height=Math.round(l*r),e.style.width="".concat(s,"px"),e.style.height="".concat(l,"px"),t.setTransform(r,0,0,r,0,0)}n(),window.addEventListener("resize",n),m.current=v,x.current=0,u.current=0,o.current=[],d.current=[],C(null),$(y?"Running...":"Paused");let s=1/120,l=0,r=performance.now();return c.current=requestAnimationFrame(function n(a){let i=Math.min(.05,(a-r)/1e3);if(r=a,y)for(l+=i;l>=s;){let e=-(f/h)*m.current-b/h*x.current;x.current+=e*s,m.current+=x.current*s,u.current+=s;let t=o.current.length?o.current[o.current.length-1].x:null;if(null!==t&&t*m.current<0&&(d.current.push(u.current),d.current.length>12&&d.current.shift(),d.current.length>=4)){let e=d.current,t=[];for(let n=2;n<e.length;n++)t.push(e[n]-e[n-2]);C(t.reduce((e,t)=>e+t,0)/t.length)}o.current.push({t:u.current,x:m.current}),o.current.length>3e3&&o.current.shift(),l-=s}(function(e,t){let n=t.clientWidth,s=t.clientHeight;e.clearRect(0,0,n,s),e.fillStyle="#f8fafc",e.fillRect(0,0,n,s);let l=80+Math.max(80,Math.min(220,(n-260)/(2*Math.max(Math.abs(v),1))))*m.current;e.fillStyle="#374151",e.fillRect(10,30,20,60),e.strokeStyle="#111827",e.lineWidth=2,e.beginPath(),e.moveTo(30,60);let r=l-60;for(let t=0;t<8;t++){let n=60+t/7*r,s=60+(t%2==0?-10:10);e.lineTo(n,s)}e.lineTo(l-30,60),e.stroke(),e.fillStyle="#ef4444",e.fillRect(l-30,30,60,60),e.fillStyle="#0f172a",e.font="13px sans-serif",e.fillText("x = ".concat(m.current.toFixed(3)," m"),12,18),e.fillText("v = ".concat(x.current.toFixed(3)," m/s"),12,36),e.fillText("t = ".concat(u.current.toFixed(2)," s"),12,54),e.fillText("Theoretical T: ".concat(S.toFixed(3)," s"),n-220,18),e.fillText("Measured T: ".concat(M?M.toFixed(4)+" s":"—"),n-220,36);let a=Math.min(320,Math.round(.36*n)),i=n-a-12,c=s-120-12;e.fillStyle="#fff",e.fillRect(i,c,a,120),e.strokeStyle="#e6eef8",e.strokeRect(i,c,a,120);let d=o.current,h=Math.max(0,d.length-240);e.beginPath(),e.strokeStyle="#2563eb",e.lineWidth=2;for(let t=h;t<d.length;t++){let n=i+(t-h)/239*a,s=2*Math.max(Math.abs(v),.5),l=c+60-d[t].x/s*60;t===h?e.moveTo(n,l):e.lineTo(n,l)}e.stroke(),e.fillStyle="#0f172a",e.font="11px sans-serif",e.fillText("Displacement (m) vs time",i+6,c+120-8)})(t,e),T(u.current),c.current=requestAnimationFrame(n)}),()=>{cancelAnimationFrame(c.current),window.removeEventListener("resize",n)}},[y,h,f,b,v]),(0,s.jsxs)("div",{className:"max-w-6xl mx-auto p-4 space-y-4",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between",children:[(0,s.jsx)("h2",{className:"text-2xl font-semibold",children:"Hooke's Law — Virtual Lab"}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:"Mass–spring experiment"})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-3 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-1 bg-white p-4 rounded shadow space-y-3",children:[(0,s.jsx)("label",{className:"block text-sm",children:"Mass (kg)"}),(0,s.jsx)("input",{type:"range",min:"0.1",max:"5",step:"0.01",value:h,onChange:e=>{p(Number(e.target.value))}}),(0,s.jsx)("input",{type:"number",value:h,onChange:e=>p(Number(e.target.value)),className:"mt-1 w-full border rounded px-2 py-1"}),(0,s.jsx)("label",{className:"block text-sm mt-2",children:"Spring constant k (N/m)"}),(0,s.jsx)("input",{type:"range",min:"1",max:"200",step:"0.1",value:f,onChange:e=>g(Number(e.target.value))}),(0,s.jsx)("input",{type:"number",value:f,onChange:e=>g(Number(e.target.value)),className:"mt-1 w-full border rounded px-2 py-1"}),(0,s.jsx)("label",{className:"block text-sm mt-2",children:"Damping c"}),(0,s.jsx)("input",{type:"range",min:"0",max:"5",step:"0.01",value:b,onChange:e=>j(Number(e.target.value))}),(0,s.jsx)("input",{type:"number",value:b,onChange:e=>j(Number(e.target.value)),className:"mt-1 w-full border rounded px-2 py-1"}),(0,s.jsx)("label",{className:"block text-sm mt-2",children:"Initial displacement x₀ (m)"}),(0,s.jsx)("input",{type:"range",min:"-2",max:"2",step:"0.01",value:v,onChange:e=>{N(Number(e.target.value)),m.current=Number(e.target.value),o.current=[],d.current=[],C(null)}}),(0,s.jsx)("input",{type:"number",value:v,onChange:e=>{N(Number(e.target.value)),m.current=Number(e.target.value)},className:"mt-1 w-full border rounded px-2 py-1"}),(0,s.jsxs)("div",{className:"flex gap-2 mt-2",children:[(0,s.jsx)("button",{onClick:()=>w(e=>!e),className:"flex-1 py-2 rounded bg-blue-600 text-white",children:y?"Pause":"Start"}),(0,s.jsx)("button",{onClick:()=>{m.current=v,x.current=0,o.current=[],d.current=[],C(null),T(0)},className:"flex-1 py-2 rounded bg-gray-200",children:"Reset"})]}),(0,s.jsxs)("div",{className:"mt-2 text-sm",children:[(0,s.jsxs)("div",{children:["Theoretical T: ",(0,s.jsxs)("strong",{children:[S.toFixed(4)," s"]})]}),(0,s.jsxs)("div",{children:["Measured T: ",(0,s.jsx)("strong",{children:M?M.toFixed(4)+" s":"—"})]}),(0,s.jsxs)("div",{className:"text-xs text-gray-500",children:["Uncertainty \xb1",Y,"s"]})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2 bg-white p-3 rounded shadow",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:"Mass-Spring Canvas"}),(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"Visualize motion and record data"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:function(){let e=new Blob([[["time_s","x_m"],...o.current.map(e=>[e.t.toFixed(4),e.x.toFixed(6)])].map(e=>e.join(",")).join("\n")],{type:"text/csv"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="hooke_".concat(Date.now(),".csv"),n.click(),URL.revokeObjectURL(t)},className:"px-3 py-1 bg-green-600 text-white rounded",children:"Export CSV"}),(0,s.jsx)("button",{onClick:function(){let e=new Blob([JSON.stringify({params:{m:h,k:f,c:b,x0:v},measuredT:M,data:o.current.slice(-2e3),sweepResults:G,manualEntries:U},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),n=document.createElement("a");n.href=t,n.download="hooke_".concat(Date.now(),".json"),n.click(),URL.revokeObjectURL(t)},className:"px-3 py-1 bg-yellow-400 rounded",children:"Export JSON"}),(0,s.jsx)("button",{onClick:function(){let e="<html><head><title>Hooke Report</title></head><body><h1>Hooke Lab</h1><p>Date: ".concat(new Date().toLocaleString(),"</p><p>m=").concat(h," kg, k=").concat(f," N/m, c=").concat(b,"</p><p>Theoretical T=").concat(S.toFixed(4)," s</p><p>Measured T=").concat(M?M.toFixed(4):"—","</p><pre>").concat((G||[]).map(e=>JSON.stringify(e)).join("\n"),'</pre><button onclick="window.print()">Print</button></body></html>'),t=window.open("","_blank");if(!t)return alert("Popup blocked");t.document.write(e),t.document.close()},className:"px-3 py-1 bg-indigo-600 text-white rounded",children:"Printable"})]})]}),(0,s.jsx)("div",{className:"w-full min-h-[260px] md:min-h-80",children:(0,s.jsx)("canvas",{ref:i,className:"w-full rounded-md"})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2 mt-3",children:[(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Stopwatch"}),(0,s.jsxs)("div",{className:"text-2xl font-mono my-2",children:[_,"s"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:function(){P?(F(!1),L.current.elapsed=Number(_)):F(!0)},className:"flex-1 py-1 rounded bg-blue-600 text-white",children:P?"Stop":"Start"}),(0,s.jsx)("button",{onClick:function(){P&&I(e=>[...e,Number(_)])},className:"py-1 px-3 rounded bg-gray-200",children:"Lap"})]}),(0,s.jsxs)("div",{className:"mt-2 text-xs",children:["Laps: ",O.length]}),(0,s.jsx)("div",{className:"mt-2",children:(0,s.jsx)("button",{onClick:function(){let e=Number(_);e&&!(e<=0)&&D(t=>[...t,{time:e,note:"manual"}])},className:"w-full py-1 rounded bg-emerald-500 text-white",children:"Record Manual Period"})})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Manual Entries"}),(0,s.jsx)("ul",{className:"mt-2 max-h-36 overflow-auto text-sm",children:0===U.length?(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"No entries"}):U.map((e,t)=>(0,s.jsxs)("li",{className:"py-1 border-b",children:[e.time.toFixed(3)," s — ",e.note]},t))})]}),(0,s.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,s.jsx)("div",{className:"text-sm font-medium",children:"Saved Runs"}),(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsx)("button",{onClick:()=>(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"hooke_".concat(Date.now()),t=JSON.parse(localStorage.getItem(en)||"[]"),n={name:e,date:new Date().toISOString(),params:{m:h,k:f,c:b,x0:v},measuredT:M,data:o.current.slice(-2e3),sweepResults:G,manualEntries:U};t.push(n),localStorage.setItem(en,JSON.stringify(t)),alert("Saved: "+e)})(),className:"w-full py-1 rounded bg-orange-500 text-white mb-2",children:"Save Run"}),(0,s.jsx)("button",{onClick:()=>{let e=JSON.parse(localStorage.getItem(en)||"[]");0===e.length?alert("No saved"):alert(e.map(e=>e.name+" "+e.date).join("\n"))},className:"w-full py-1 rounded bg-gray-200 mb-2",children:"List"}),(0,s.jsx)("button",{onClick:()=>void(localStorage.removeItem(en),alert("Cleared saved runs")),className:"w-full py-1 rounded bg-red-500 text-white",children:"Clear"})]})]})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Sweep — Auto-measure"}),(0,s.jsxs)("div",{className:"grid md:grid-cols-6 gap-2 items-end",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs",children:"Mode"}),(0,s.jsxs)("select",{value:q,onChange:e=>J(e.target.value),className:"w-full border rounded px-2 py-1",children:[(0,s.jsx)("option",{value:"mass",children:"Mass"}),(0,s.jsx)("option",{value:"k",children:"Spring constant"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs",children:"Start"}),(0,s.jsx)("input",{type:"number",value:W,onChange:e=>A(Number(e.target.value)),className:"w-full border rounded px-2 py-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs",children:"End"}),(0,s.jsx)("input",{type:"number",value:B,onChange:e=>H(Number(e.target.value)),className:"w-full border rounded px-2 py-1"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs",children:"Steps"}),(0,s.jsx)("input",{type:"number",min:"2",value:V,onChange:e=>z(Number(e.target.value)),className:"w-full border rounded px-2 py-1"})]}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:()=>{K([]),es()},className:"w-full py-2 rounded bg-indigo-600 text-white",children:Q?"Running...":"Run Sweep"})}),(0,s.jsx)("div",{children:(0,s.jsx)("button",{onClick:()=>K([]),className:"w-full py-2 rounded bg-gray-200",children:"Clear"})})]}),(0,s.jsxs)("div",{className:"mt-3 grid md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm",children:"Sweep Results"}),(0,s.jsx)("div",{className:"mt-2 max-h-40 overflow-auto text-sm",children:0===G.length?(0,s.jsx)("div",{className:"text-xs text-gray-500",children:"No results"}):(0,s.jsxs)("table",{className:"w-full border-collapse",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"border-b border-gray-200 p-2",children:"Param"}),(0,s.jsx)("th",{className:"border-b border-gray-200 p-2",children:"T (s)"})]})}),(0,s.jsx)("tbody",{children:G.map((e,t)=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{className:"p-2",children:e.m?"m=".concat(e.m.toFixed(3)):"k=".concat(e.k.toFixed(3))}),(0,s.jsx)("td",{className:"p-2",children:e.T.toFixed(4)})]},t))})]})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm",children:"Fit (T vs sqrt(m/k) or variant)"}),(0,s.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:"Use results to estimate relation"})]})]})]}),(0,s.jsxs)("div",{className:"bg-white p-4 rounded shadow",children:[(0,s.jsx)("h3",{className:"font-semibold",children:"Lab Instructions"}),(0,s.jsxs)("ol",{className:"list-decimal list-inside text-sm mt-2",children:[(0,s.jsx)("li",{children:"Set mass and spring constant, drag initial displacement or use slider."}),(0,s.jsx)("li",{children:"Start simulation and use stopwatch to manually time oscillations (or use auto-measure)."}),(0,s.jsx)("li",{children:"Run sweep to collect T for different masses or spring constants."}),(0,s.jsx)("li",{children:"Export CSV/JSON or printable report for submission."})]})]})]})}},1523:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return l}});let s=n(8993);function l(e){let{reason:t,children:n}=e;if("undefined"==typeof window)throw new s.BailoutToCSRError(t);return n}},49:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadCss",{enumerable:!0,get:function(){return r}});let s=n(7437),l=n(544);function r(e){let{moduleIds:t}=e;if("undefined"!=typeof window)return null;let n=(0,l.getExpectedRequestStore)("next/dynamic css"),r=[];if(n.reactLoadableManifest&&t){let e=n.reactLoadableManifest;for(let n of t){if(!e[n])continue;let t=e[n].files.filter(e=>e.endsWith(".css"));r.push(...t)}}return 0===r.length?null:(0,s.jsx)(s.Fragment,{children:r.map(e=>(0,s.jsx)("link",{precedence:"dynamic",rel:"stylesheet",href:n.assetPrefix+"/_next/"+encodeURI(e),as:"style"},e))})}}},function(e){e.O(0,[971,117,744],function(){return e(e.s=5650)}),_N_E=e.O()}]);